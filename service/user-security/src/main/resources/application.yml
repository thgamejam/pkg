spring:
  application:
    name: user-security
  config:
    # 必要！
    # https://docs.spring.io/spring-cloud-consul/docs/current/reference/html/#config-data-import
    import: optional:consul:localhost:8500
  cloud:
    consul:
      host: localhost
      port: 8500
      config:
        enabled: true
        # 以下内容组合为 consul kv 路径 "prefixes/name/data-key"
        # 即: "service/user-security/dev"
        prefixes:
          - service
        name: ${spring.application.name}
        data-key: dev
        format: YAML # Value 类型
      discovery:
        enabled: true
        register: true    # 注册自身到 consul
        deregister: true  # 服务停止时取消注册
        service-name: ${spring.application.name}  # 注册到 consul 的服务名
        health-check-path: /actuator/health   # 健康检查的接口 由 Spring Boot Actuator 提供
        heartbeat:
          enabled: true   # 开启 consul 心跳机制

management:
  endpoint:
    shutdown:
      enabled: true
    consul:
      enabled: true
  endpoints:
    web:
      exposure:
        include: "*"
        exclude: "env,beans"
  health:
    refresh:
      enabled: true